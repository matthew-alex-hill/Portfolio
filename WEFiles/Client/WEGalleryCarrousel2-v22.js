$(window).load(function(){WEGalleryCarrousel2.Initialize()});var WEGalleryCarrousel2={Initialize:function(){for(Elem in OEConfWEGalleryCarrousel2){var n=$("#"+Elem);if(!n.length)return;if(WEInfoPage.RenderMode=="Editor")return;WEGalleryCarrousel2.IniCarrousel(Elem)}},IniCarrousel:function(n){var t=$("#"+n),r,u,i,o,v,y,p;t.data("ConfWECarrousel",OEConfWEGalleryCarrousel2[n]);var h=t.find(".WECarrousel2Parent:first"),f=h.find(".WECarrousel2ImagesParent:first"),w=t.find(".OESZ_Previous:first"),b=t.find(".OESZ_Next:first"),k=f.find("img");for(t.data("ImgClassName",f.find("img:first").attr("class")),t.data("FirstIndex",0),t.data("LastIndex",k.length-1),t.data("Timeout",!1),r=[],t.data("CurrentAnimate",r),u=t.data("ConfWECarrousel").ImagesInfo,o=[],i=0;i<u.length;i++){var c=OE.Common.getLocString(u[i].Title),d=OE.Common.Link.getPath(u[i].ImgURL),l="";c!=""&&(l='title="'+c+'"');var a='style="height:'+u[i].ImgHeight+"px; width:"+u[i].ImgWidth+'px;"',e='<img alt="" class="'+t.data("ImgClassName")+'" src="'+d+'" '+l+">",s=OE.Common.Link.getPath(u[i].PageLink);s!=""&&s!="../"&&(v=u[i].PageLink.Target,e="<a "+OE.Common.Link.getHref(s,v)+">"+e+"<\/a>");y='<div ID="preloadImg" Style="position:absolute;left:100000px;top:-100000px;" '+a+" >"+e+"<\/div>";h.after(y);t.find("#preloadImg:first").remove();e='<div class="CarrouselV_Img" '+a+" >"+e+"<\/div>";o.push(e)}t.data("PreloadList",o);t.data("ConfWECarrousel").Auto==!0&&(t.data("RefDec",1),t.data("ConfWECarrousel").Sens==0?(t.data("ToNext",!0),p=setTimeout(function(){WEGalleryCarrousel2.Next(t,f)},t.data("ConfWECarrousel").AutoWaitingTime)):(t.data("ToNext",!1),p=setTimeout(function(){WEGalleryCarrousel2.Prev(t,f)},t.data("ConfWECarrousel").AutoWaitingTime)));b.click(function(){for(i=0;i<r.length;i=i+2){var n=i+1;r[i].stop();r[i].css("top",r[n])}t.data("CurrentAnimate",[]);t.data("ToNext",!1);t.data("RefDec",1);WEGalleryCarrousel2.Prev(t,f)});w.click(function(){for(i=0;i<r.length;i=i+2){var n=i+1;r[i].stop();r[i].css("top",r[n])}t.data("CurrentAnimate",[]);t.data("ToNext",!0);t.data("RefDec",1);WEGalleryCarrousel2.Next(t,f)})},Prev:function(n,t){clearTimeout(n.data("Timeout"));var i=WEGalleryCarrousel2.PrevAdd2(n,t.height(),t);WEGalleryCarrousel2.Animate(i,n,0,t)},Next:function(n,t){clearTimeout(n.data("Timeout"));var i=WEGalleryCarrousel2.NextAdd2(n,t.height(),t);WEGalleryCarrousel2.Animate(i,n,0,t)},Animate:function(n,t,i,r){t.data("ConfWECarrousel").TypeEffect=="2"?WEGalleryCarrousel2.Animate1(n,t,0,r):WEGalleryCarrousel2.Animate2(n,t,r)},Animate2:function(n,t,i){for(var u=0,o,r=0;r<n.length;r++){var f=n[r][0],s=n[r][1],e=t.data("ConfWECarrousel").EasingJs;e=="none"&&(e="linear");o=t.data("CurrentAnimate");o.push(f,s);t.data("CurrentAnimate",o);f.stop();f.animate({top:s},{duration:t.data("ConfWECarrousel").Vitesse,easing:e,complete:function(){if(u=u+1,u==n.length){for(X2=0;X2<n.length;X2++)n[X2][2]==!0&&n[X2][0].remove();if(t.data("ConfWECarrousel").Decalage>t.data("RefDec")){var r=t.data("RefDec")+1;t.data("RefDec",r);setTimeout(function(){t.data("ToNext")==!0?WEGalleryCarrousel2.Next(t,i):WEGalleryCarrousel2.Prev(t,i)},0)}else t.data("ConfWECarrousel").Auto==!0&&(t.data("RefDec",1),t.data("Timeout",setTimeout(function(){t.data("ConfWECarrousel").Sens==0?(t.data("ToNext",!0),WEGalleryCarrousel2.Next(t,i)):(t.data("ToNext",!1),WEGalleryCarrousel2.Prev(t,i))},t.data("ConfWECarrousel").AutoWaitingTime)))}}})}},Animate1:function(n,t,i,r){var u=n[i][0],e=n[i][1],o=n[i][2],f=t.data("ConfWECarrousel").EasingJs;f=="none"&&(f="linear");u.stop();u.animate({top:e},{duration:t.data("ConfWECarrousel").Vitesse,easing:f,complete:function(){var f,e;o==!0&&u.remove();f=i+1;f<n.length?WEGalleryCarrousel2.Animate1(n,t,f,r):t.data("ConfWECarrousel").Decalage>t.data("RefDec")?(e=t.data("RefDec")+1,t.data("RefDec",e),setTimeout(function(){t.data("ToNext")==!0?WEGalleryCarrousel2.Next(t,r):WEGalleryCarrousel2.Prev(t,r)},0)):t.data("ConfWECarrousel").Auto==!0&&(t.data("RefDec",1),setTimeout(function(){t.data("ConfWECarrousel").Sens==0?WEGalleryCarrousel2.Next(t,r):WEGalleryCarrousel2.Prev(t,r)},t.data("ConfWECarrousel").AutoWaitingTime))}})},NextAdd2:function(n,t,i){var h=n.data("ConfWECarrousel").ImagesInfo,tt=n.data("FirstIndex"),c=0,d=0,g=n.data("FirstIndex"),l=0,a=n.data("FirstIndex")+1,o=n.data("LastIndex")+1,u,nt,v,f,y,e,s,p,w,b,k,r;o>=h.length&&(o=0);u=o;do if(c=c+h[u].ImgOuterHeight,c>=t){a=u;g=u;break}else l++,u=u-1,u<0&&(u=h.length-1),d=c;while(g!=u);for(nt=$(n.data("PreloadList")[o]).css("top",t+"px"),i.find(".CarrouselV_Img").filter(":last").after(nt),a>=h.length&&(a=0),n.data("FirstIndex",a),n.data("LastIndex",o),v=[],f=i.find(".CarrouselV_Img"),l==0?(p=f.length-1,y=0):(p=f.length-l,y=(t-d)/(l+1)),e=0;e<p;e++)r=[],r[0]=$(f[e]),r[1]=-1*$(f[e]).outerHeight(!0),r[2]=!0,v[e]=r;for(w=0,b=0,s=e;s<f.length;s++)k=y+w+b,r=[],r[0]=$(f[s]),r[1]=k,r[2]=!1,v[s]=r,w=k,b=r[0].outerHeight(!0);return v},PrevAdd2:function(n,t,i){var o=n.data("ConfWECarrousel").ImagesInfo,rt=n.data("LastIndex"),c=0,nt=0,tt=n.data("LastIndex"),l=0,a=n.data("LastIndex")-1,e=n.data("FirstIndex")-1,f,it,s,v,y,u,h,p,w,b,k,r,d,g;e<0&&(e=o.length-1);f=e;do if(c=c+o[f].ImgOuterHeight,c>=t){a=f;tt=f;break}else l++,f=f+1,f>=o.length&&(f=0),nt=c;while(tt!=f);for(a<0&&(a=o.length-1),n.data("FirstIndex",e),n.data("LastIndex",a),it=$(n.data("PreloadList")[e]).css("top","-"+o[e].ImgOuterHeight+"px"),i.find(".CarrouselV_Img").filter(":first").before(it),s=[],v=i.find(".CarrouselV_Img"),l==0?(y=0,p=1):(y=(t-nt)/(l+1),p=l),w=0,b=0,u=0;u<p;u++)k=y+w+b,r=[],r[0]=$(v[u]),r[1]=k,r[2]=!1,s[u]=r,w=k,b=r[0].outerHeight(!0);for(h=u;h<v.length;h++)r=[],r[0]=$(v[h]),r[1]=t,r[2]=!0,s[h]=r;for(d=[],g=0,u=0;u<=s.length-1;u++)d[g]=s[u],g++;return d}}